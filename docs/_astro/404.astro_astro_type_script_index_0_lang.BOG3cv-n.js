import{p as g,a as k,P,S as v}from"./HandlebarsRoutes.CFEvc3cI.js";const n={avatar:"Player",ghost:"Ghost",revenant:"Revenant","dire-revenant":"Dire Revenant","revenant-lord":"Revenant Lord","terrapus/child":"Juvenile Terrapus","terrapus/adult":"Adult Terrapus","terrapus/racing":"Racing Terrapus","terrapus/pet":"Pet Terrapus","terrapus/fire":"Fire Terrapus","terrapus/acid":"Acid Terrapus","terrapus/skeleton":"Skeleton Terrapus","terrapus/frost":"Frost Terrapus","terrapus/queen":"Queen Terrapus","creatures/rat":"Rat","creatures/skunk":"Skunk","creatures/skunk-pet":"Pet Skunk","creatures/armadillo":"Armadillo","creatures/roach":"Roach","creatures/roach-large":"Large Roach","creatures/bunny-ice":"Bunny","creatures/bunny-ice-pet":"Pet Bunny","creatures/crow":"Crow","creatures/crow-auto":"Cyborg Crow","creatures/crow-pet":"Pet Crow","creatures/vulture":"Vulture","creatures/vulture-pet":"Pet Vulture","creatures/bluejay":"Bluejay","creatures/cardinal":"Cardinal","creatures/seagull":"Seagull","creatures/butterfly-monarch":"Monarch Butterfly","creatures/butterfly-papilio-ulysses":"Papilio Ulysees Butterfly","creatures/butterfly-swallowtail":"Swallowtail Butterfly","creatures/butterfly-green":"Green Butterfly","creatures/butterfly-moth":"Moth","creatures/butterfly-owl":"Owl Butterfly","creatures/butterfly-paper-kite":"Paper Kite Butterfly","creatures/butterfly-rumanzovia":"Rumanzovia Butterfly","creatures/scorpion":"Scorpion","creatures/scorpion-large":"Large Scorpion","creatures/bat":"Bat","creatures/bat-auto":"Cyborg Bat","creatures/sandworm":"Sand Worm","creatures/snowworm":"Arctic Worm","creatures/tentacle":"Tentacle Monster","ground/geyser-small":"Geyser","desert/sandstorm":"Sand Storm","automata/android":"Android","automata/cat":"Android Cat","automata/dog":"Android Dog","automata/butler-brass":"Brass Butler Bot","automata/butler-diamond":"Diamond Butler Bot","automata/butler-onyx":"Onyx Butler Bot","automata/tiny":"Tiny Automata","automata/small":"Small Automata","automata/medium":"Medium Automata","automata/large":"Large Automata","brains/tiny-crawler":"Baby Crawler Brain","brains/tiny-flyer":"Baby Flyer Brain","brains/small":"Juvenile Brain","brains/medium":"Adult Brain","brains/medium-dire":"Dire Adult Brain","brains/large":"Brain Lord","aquatic/clownfish":"Clownfish","aquatic/flame-hawkfish":"Flame Hawkfish","aquatic/sergeant-major":"Sergeant Major Fish","aquatic/almaco-jack":"Almaco Jack Fish","aquatic/angelfish":"Angelfish","aquatic/codfish":"Codfish","aquatic/herring":"Herring Fish","aquatic/piranha":"Piranha","aquatic/anemone-red":"Red Anemone","aquatic/anemone-magenta":"Magenta Anemone","aquatic/anemone-electric":"Electric Anemone"},w=Object.keys(n).sort((e,r)=>n[e]<n[r]?-1:1),m=[{label:"Level:",dataPath:["level"]},{label:"Skill Level:",dataPath:["skill_level"]},{label:"Items Mined:",dataPath:["items_mined"]},{label:"Items Placed:",dataPath:["items_placed"]},{label:"Items Crafted:",dataPath:["items_crafted"]},{label:"Deaths:",dataPath:["deaths"]}],p=[{label:"Areas Discovered:",dataPath:["statistics","areas_explored"]},{label:"Automata Killed:",dataPath:["computed","automata_killed"]},{label:"Brains Killed:",dataPath:["computed","brains_killed"]},{label:"Chests Looted:",dataPath:["statistics","containers_looted"]},{label:"Creatures Killed:",dataPath:["computed","creatures_killed"]},{label:"Deliverances:",dataPath:["statistics","deliverances"]},{label:"Dungeons Raided:",dataPath:["statistics","dungeons_raided"]},{label:"Infernal Parts Discovered:",dataPath:["computed","expiator_parts_discovered"]},{label:"Landmarks Upvoted:",dataPath:["statistics","landmarks_upvoted"]},{label:"Maws Plugged:",dataPath:["statistics","maws_plugged"]},{label:"Minerals Mined:",dataPath:["statistics","minerals_mined"]},{label:"Players Killed:",dataPath:["statistics","players_killed"]},{label:"Purifier Parts Discovered:",dataPath:["computed","purifier_parts_discovered"]},{label:"Supernatural Killed:",dataPath:["computed","supernatural_killed"]},{label:"Teleporters Discovered:",dataPath:["statistics","discoveries","mechanical/teleporter"]},{label:"Trees Mined:",dataPath:["statistics","trees_mined"]},{label:"Undertakings:",dataPath:["statistics","undertakings"]}];function c(e){return e?.statistics?.kills?Object.entries(e.statistics.kills):[]}function h(e){return e?.statistics?.discoveries?Object.entries(e.statistics.discoveries):[]}const l=e=>r=>r.reduce((a,t)=>t[0].startsWith(e)?a+t[1]:a,0),B=e=>r=>r.reduce((a,t)=>t[0].includes(e)?a+t[1]:a,0),_={automata_killed:[c,l("automata/")],brains_killed:[c,l("brains/")],creatures_killed:[c,l("creatures/")],supernatural_killed:[c,B("revenant")],expiator_parts_discovered:[h,l("hell/expiator")],purifier_parts_discovered:[h,l("mechanical/geck")]};function y(){return{vitals:{config:m,ExpectedNumberOfItems:m.length},accomplishments:{config:p,ExpectedNumberOfItems:p.length},kills:{SortedEntityIds:w,EntityTitles:n,ExpectedNumberOfItems:Object.keys(n).length}}}async function A({username:e},{onError:r}){const a=await fetch(g(`${k}/players/${e}`)).then(async t=>t.ok?await t.json():{message:"Error occurred while fetching data.",stackTrace:await t.text()});return a.message?(r(a),null):(a.computed??={},Object.entries(_).forEach(([t,o])=>{a.computed[t]=o.reduce((s,i)=>i(s),a)}),{...y(),data:a})}async function C({username:e}){return{title:e,backlink:"../players"}}const T=Object.freeze(Object.defineProperty({__proto__:null,Component:P,HeaderConfig:C,loader:A,placeholderLoader:y},Symbol.toStringTag,{value:"Module"})),S=window.location.pathname,f=S.match(/\/players\/([^\/]{1,64})\/?$/),L={"/players/$username":T};if(f){const[e,r]=f;d({id:"/players/$username",username:r})}function b(e){if(e){document.getElementsByTagName("header")[0].classList.remove("hidden"),document.getElementById("title").innerHTML=e.title;const r=document.getElementById("backlink");r.setAttribute("href",e.backlink??"#"),e.backlink?r.classList.remove("hidden"):r.classList.add("hidden")}else document.getElementsByTagName("header")[0].classList.add("hidden")}function d(e){e.id=="error"&&(u(v(e.message,null,e.stackTrace)),b(null));function r(a){d({...a,id:"error"})}return(async()=>{for(const[a,t]of Object.entries(L))if(a===e.id){if(t.HeaderConfig){const s=await t.HeaderConfig(e);b(s);let i="Deepworld 2025 MMO";s?.title&&(i=s.title+" - "+i),document.title=i}u(t.Component(t.placeholderLoader()));const o=await t.loader(e,{onError:r});o&&u(t.Component(o));return}})().catch(a=>{d({id:"error",message:"Error occurred while fetching data.",stackTrace:a}),console.error(a)})}function u(e){document.getElementById("app").innerHTML=e}
