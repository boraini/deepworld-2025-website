import{p as w,a as P,P as v,S as B}from"./HandlebarsRoutes.CX2dEl_C.js";const m={};window&&(window.spinePlayers=m);function _(e,r){const a="https://v2202410239072292297.goodsrv.de:6443/player-spine";return m[e]??=new spine.SpinePlayer(e,{skeleton:`${a}/player.json`,atlas:`${a}/characters-animated+hd2.atlas`,scale:1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,skin:"default"}),m[e]}const c={avatar:"Player",ghost:"Ghost",revenant:"Revenant","dire-revenant":"Dire Revenant","revenant-lord":"Revenant Lord","terrapus/child":"Juvenile Terrapus","terrapus/adult":"Adult Terrapus","terrapus/racing":"Racing Terrapus","terrapus/pet":"Pet Terrapus","terrapus/fire":"Fire Terrapus","terrapus/acid":"Acid Terrapus","terrapus/skeleton":"Skeleton Terrapus","terrapus/frost":"Frost Terrapus","terrapus/queen":"Queen Terrapus","creatures/rat":"Rat","creatures/skunk":"Skunk","creatures/skunk-pet":"Pet Skunk","creatures/armadillo":"Armadillo","creatures/roach":"Roach","creatures/roach-large":"Large Roach","creatures/bunny-ice":"Bunny","creatures/bunny-ice-pet":"Pet Bunny","creatures/crow":"Crow","creatures/crow-auto":"Cyborg Crow","creatures/crow-pet":"Pet Crow","creatures/vulture":"Vulture","creatures/vulture-pet":"Pet Vulture","creatures/bluejay":"Bluejay","creatures/cardinal":"Cardinal","creatures/seagull":"Seagull","creatures/butterfly-monarch":"Monarch Butterfly","creatures/butterfly-papilio-ulysses":"Papilio Ulysees Butterfly","creatures/butterfly-swallowtail":"Swallowtail Butterfly","creatures/butterfly-green":"Green Butterfly","creatures/butterfly-moth":"Moth","creatures/butterfly-owl":"Owl Butterfly","creatures/butterfly-paper-kite":"Paper Kite Butterfly","creatures/butterfly-rumanzovia":"Rumanzovia Butterfly","creatures/scorpion":"Scorpion","creatures/scorpion-large":"Large Scorpion","creatures/bat":"Bat","creatures/bat-auto":"Cyborg Bat","creatures/sandworm":"Sand Worm","creatures/snowworm":"Arctic Worm","creatures/tentacle":"Tentacle Monster","ground/geyser-small":"Geyser","desert/sandstorm":"Sand Storm","automata/android":"Android","automata/cat":"Android Cat","automata/dog":"Android Dog","automata/butler-brass":"Brass Butler Bot","automata/butler-diamond":"Diamond Butler Bot","automata/butler-onyx":"Onyx Butler Bot","automata/tiny":"Tiny Automata","automata/small":"Small Automata","automata/medium":"Medium Automata","automata/large":"Large Automata","brains/tiny-crawler":"Baby Crawler Brain","brains/tiny-flyer":"Baby Flyer Brain","brains/small":"Juvenile Brain","brains/medium":"Adult Brain","brains/medium-dire":"Dire Adult Brain","brains/large":"Brain Lord","aquatic/clownfish":"Clownfish","aquatic/flame-hawkfish":"Flame Hawkfish","aquatic/sergeant-major":"Sergeant Major Fish","aquatic/almaco-jack":"Almaco Jack Fish","aquatic/angelfish":"Angelfish","aquatic/codfish":"Codfish","aquatic/herring":"Herring Fish","aquatic/piranha":"Piranha","aquatic/anemone-red":"Red Anemone","aquatic/anemone-magenta":"Magenta Anemone","aquatic/anemone-electric":"Electric Anemone"},S=Object.keys(c).sort((e,r)=>c[e]<c[r]?-1:1),h=[{label:"Level:",dataPath:["level"]},{label:"Skill Level:",dataPath:["skill_level"]},{label:"Items Mined:",dataPath:["items_mined"]},{label:"Items Placed:",dataPath:["items_placed"]},{label:"Items Crafted:",dataPath:["items_crafted"]},{label:"Deaths:",dataPath:["deaths"]}],f=[{label:"Areas Discovered:",dataPath:["statistics","areas_explored"]},{label:"Automata Killed:",dataPath:["computed","automata_killed"]},{label:"Brains Killed:",dataPath:["computed","brains_killed"]},{label:"Chests Looted:",dataPath:["statistics","containers_looted"]},{label:"Creatures Killed:",dataPath:["computed","creatures_killed"]},{label:"Deliverances:",dataPath:["statistics","deliverances"]},{label:"Dungeons Raided:",dataPath:["statistics","dungeons_raided"]},{label:"Infernal Parts Discovered:",dataPath:["computed","expiator_parts_discovered"]},{label:"Landmarks Upvoted:",dataPath:["statistics","landmarks_upvoted"]},{label:"Maws Plugged:",dataPath:["statistics","maws_plugged"]},{label:"Minerals Mined:",dataPath:["statistics","minerals_mined"]},{label:"Players Killed:",dataPath:["statistics","players_killed"]},{label:"Purifier Parts Discovered:",dataPath:["computed","purifier_parts_discovered"]},{label:"Supernatural Killed:",dataPath:["computed","supernatural_killed"]},{label:"Teleporters Discovered:",dataPath:["statistics","discoveries","mechanical/teleporter"]},{label:"Trees Mined:",dataPath:["statistics","trees_mined"]},{label:"Undertakings:",dataPath:["statistics","undertakings"]}];function u(e){return e?.statistics?.kills?Object.entries(e.statistics.kills):[]}function y(e){return e?.statistics?.discoveries?Object.entries(e.statistics.discoveries):[]}const o=e=>r=>r.reduce((a,t)=>t[0].startsWith(e)?a+t[1]:a,0),A=e=>r=>r.reduce((a,t)=>t[0].includes(e)?a+t[1]:a,0),C={automata_killed:[u,o("automata/")],brains_killed:[u,o("brains/")],creatures_killed:[u,o("creatures/")],supernatural_killed:[u,A("revenant")],expiator_parts_discovered:[y,o("hell/expiator")],purifier_parts_discovered:[y,o("mechanical/geck")]};function k(){return{vitals:{config:h,ExpectedNumberOfItems:h.length},accomplishments:{config:f,ExpectedNumberOfItems:f.length},kills:{SortedEntityIds:S,EntityTitles:c,ExpectedNumberOfItems:Object.keys(c).length}}}async function T({username:e},{onError:r}){const a=await fetch(w(`${P}/players/${e}`)).then(async s=>s.ok?await s.json():{message:"Error occurred while fetching data.",stackTrace:await s.text()});window&&!window.spineScript&&(window.spineScript=new Promise((s,i)=>{const n="https://v2202410239072292297.goodsrv.de:6443/player-spine",l=document.createElement("script");l.src=`${n}/spine-player.min.js`,document.head.appendChild(l),l.onload=s,l.onerror=i}));const[t]=await Promise.all([a,window.spineScript]);return t.computed??={},Object.entries(C).forEach(([s,i])=>{t.computed[s]=i.reduce((n,l)=>l(n),t)}),{...k(),data:await a}}async function I({username:e}){return{title:e,backlink:"../../players"}}async function E(e){_("player-container")}const L=Object.freeze(Object.defineProperty({__proto__:null,Component:v,HeaderConfig:I,loader:T,onload:E,placeholderLoader:k},Symbol.toStringTag,{value:"Module"})),M=window.location.pathname,b=M.match(/\/players\/([^\/]{1,64})\/?$/),O={"/players/$username":L};if(b){const[e,r]=b;p({id:"/players/$username",username:r})}function g(e){if(e){document.getElementsByTagName("header")[0].classList.remove("hidden"),document.getElementById("title").innerHTML=e.title;const r=document.getElementById("backlink");r.setAttribute("href",e.backlink??"#"),e.backlink?r.classList.remove("hidden"):r.classList.add("hidden")}else document.getElementsByTagName("header")[0].classList.add("hidden")}function p(e){e.id=="error"&&(d(B(e.message,null,e.stackTrace)),g(null));function r(a){p({...a,id:"error"})}return(async()=>{for(const[a,t]of Object.entries(O))if(a===e.id){if(t.HeaderConfig){const i=await t.HeaderConfig(e);g(i);let n="Deepworld 2025 MMO";i?.title&&(n=i.title+" - "+n),document.title=n}d(t.Component(t.placeholderLoader()));const s=await t.loader(e,{onError:r});s&&d(t.Component(s)),t.onload&&requestAnimationFrame(()=>t.onload(s));return}})().catch(a=>{p({id:"error",message:"Error occurred while fetching data.",stackTrace:a}),console.error(a)})}function d(e){document.getElementById("app").innerHTML=e}
