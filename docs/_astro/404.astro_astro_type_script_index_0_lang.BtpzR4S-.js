import{p as B,a as A,P as _,S as x}from"./HandlebarsRoutes.DCRgC3u0.js";const h={};window&&(window.spinePlayers=h);function C(e,a){const r="https://v2202410239072292297.goodsrv.de:6443/player-spine";return h[e]??=new spine.SpinePlayer(e,{skeleton:`${r}/player.json`,atlas:`${r}/characters-animated+hd2.atlas`,scale:1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,success(t){if(t.setAnimation("idle-1"),requestAnimationFrame(()=>t.pause()),a){const[s,i]=E(a);t.skeleton.slots.forEach(n=>{const o=n.data.name;if(o in s){if(!s[o]){t.skeleton.setAttachment(o,null);return}t.skeleton.getAttachment(n.data.index,s[o])?(t.skeleton.setAttachment(o,s[o]),o in i&&(n.color=spine.Color.fromString(i[o]))):console.error(`Attachment not found! ${s[o]}`)}j.includes(o)&&(n.color.setFromString(a["h*"]+"FF"),console.log("hair color on "+o+JSON.stringify(n.color))),O.includes(o)&&(n.color.setFromString(a["c*"]+"FF"),console.log("skin color on "+o+JSON.stringify(n.color)))}),t.skeleton.updateCache()}}}),h[e]}const T={"headgear/tophat-brown":"headgear/tophat","headgear/bowlerhat-black":"headgear/bowlerhat","headgear/newsie-hat-gray":"headgear/newsie-hat","headgear/winter-hat-brown":"headgear/winter-hat","footwear/shoes":"footwear/shoe","bottoms/clown":"bottoms/clown-leg","bottoms/royal":"bottoms/royal-leg","bottoms/brain":"bottoms/brain-leg","bottoms/brass":"bottoms/brass-leg","bottoms/plant":"bottoms/plant-leg","bottoms/samaurai":"bottoms/samaurai-leg","bottoms/watermelon":"bottoms/watermelon-leg","bottoms/pajamas":"bottoms/pajamas-leg","bottoms/valkyrie":"bottoms/valkyrie-leg","bottoms/karate":"bottoms/karate-leg","bottoms/diving-suit":"bottoms/diving-suit-leg","bottoms/android":"bottoms/android-leg","prosthetics/brass-legs":"prosthetics/brass","prosthetics/diamond-legs":"prosthetics/diamond","prosthetics/onyx-legs":"prosthetics/onyx"};function p(e,a){const r=T[a];if(r)return r;if(e=="fw")return"footwear/shoe";if(e=="b"&&a.startsWith("bottoms/dress"))return"bottoms/dress";if(e=="b"&&!["dress","skirt","tutu"].some(s=>a.includes(s)))return"bottoms/pants";const t="accessories/jetpack";return e=="u"&&a.startsWith(t)?"avatar/jetpack"+a.substring(t.length):a}const b={fw:{"-foot-lower":"-lower","-foot-upper":"-upper"},fg:{"-facialgear":""},fh:{"-facialhair":""},b:{"-leg-lower":"-lower","-leg-lower1":"-lower","-leg-upper":"-upper","-leg-upper1":"-upper"},t:{"-arm-upper":"-arm-upper","-arm-upper1":"-arm-upper","-arm-lower":"-arm-lower","-arm-lower1":"-arm-lower","-torso":""},h:{"-hair":""},hg:{"-headgear":""},to:{"-exo-torso":"","-exo-arm-upper":"-arm-upper","-exo-arm-upper2":"-arm-upper","-exo-arm-lower":"-arm-lower","-exo-arm-lower2":"-arm-lower","-hand":"-hand","-hand1":"-hand","-exo-hand":"-hand","-exo-hand2":"-hand"},lo:{"-exo-leg-upper":"-leg-upper","-exo-leg-upper2":"-leg-upper","-exo-leg-lower":"-leg-lower","-exo-leg-lower2":"-leg-lower","-exo-foot-upper":"-foot-upper","-exo-foot-upper2":"-foot-upper","-exo-foot-lower":"-foot-lower","-exo-foot-lower2":"-foot-lower"}},j=["-hair","-facial-hair"].map(e=>"character"+e),O=["-head","-eye","-hand","-hand1"].map(e=>"character"+e);function E(e){const a={},r={};for(let t in e){if(t==="u"&&(a.suit=p("u",e.u)),t==="b"&&L(e,a,r))continue;const s=e[t],i=p(t,s);for(let n in b[t]??[]){let o=null;if(i!="air"){const S=b[t][n];o=i+S}a["character"+n]=o;const d=e[t+"*"];d&&(r["character"+n]=d)}}return[a,r]}function L(e,a,r){if(e.b=="air")return!1;const t=e.b.includes("dress"),s=e.b.includes("skirt"),i=!s&&e.b.includes("tutu");if(t||s||i){const n=p("b",e.b);return(i?["-m"]:["-l","-m","-r"]).forEach(o=>{a["character-skirt"+o]=n+o,t&&e["b*"]&&(r["character-skirt"+o]=e["b*"])}),!0}return!1}const c={avatar:"Player",ghost:"Ghost",revenant:"Revenant","dire-revenant":"Dire Revenant","revenant-lord":"Revenant Lord","terrapus/child":"Juvenile Terrapus","terrapus/adult":"Adult Terrapus","terrapus/racing":"Racing Terrapus","terrapus/pet":"Pet Terrapus","terrapus/fire":"Fire Terrapus","terrapus/acid":"Acid Terrapus","terrapus/skeleton":"Skeleton Terrapus","terrapus/frost":"Frost Terrapus","terrapus/queen":"Queen Terrapus","creatures/rat":"Rat","creatures/skunk":"Skunk","creatures/skunk-pet":"Pet Skunk","creatures/armadillo":"Armadillo","creatures/roach":"Roach","creatures/roach-large":"Large Roach","creatures/bunny-ice":"Bunny","creatures/bunny-ice-pet":"Pet Bunny","creatures/crow":"Crow","creatures/crow-auto":"Cyborg Crow","creatures/crow-pet":"Pet Crow","creatures/vulture":"Vulture","creatures/vulture-pet":"Pet Vulture","creatures/bluejay":"Bluejay","creatures/cardinal":"Cardinal","creatures/seagull":"Seagull","creatures/butterfly-monarch":"Monarch Butterfly","creatures/butterfly-papilio-ulysses":"Papilio Ulysees Butterfly","creatures/butterfly-swallowtail":"Swallowtail Butterfly","creatures/butterfly-green":"Green Butterfly","creatures/butterfly-moth":"Moth","creatures/butterfly-owl":"Owl Butterfly","creatures/butterfly-paper-kite":"Paper Kite Butterfly","creatures/butterfly-rumanzovia":"Rumanzovia Butterfly","creatures/scorpion":"Scorpion","creatures/scorpion-large":"Large Scorpion","creatures/bat":"Bat","creatures/bat-auto":"Cyborg Bat","creatures/sandworm":"Sand Worm","creatures/snowworm":"Arctic Worm","creatures/tentacle":"Tentacle Monster","ground/geyser-small":"Geyser","desert/sandstorm":"Sand Storm","automata/android":"Android","automata/cat":"Android Cat","automata/dog":"Android Dog","automata/butler-brass":"Brass Butler Bot","automata/butler-diamond":"Diamond Butler Bot","automata/butler-onyx":"Onyx Butler Bot","automata/tiny":"Tiny Automata","automata/small":"Small Automata","automata/medium":"Medium Automata","automata/large":"Large Automata","brains/tiny-crawler":"Baby Crawler Brain","brains/tiny-flyer":"Baby Flyer Brain","brains/small":"Juvenile Brain","brains/medium":"Adult Brain","brains/medium-dire":"Dire Adult Brain","brains/large":"Brain Lord","aquatic/clownfish":"Clownfish","aquatic/flame-hawkfish":"Flame Hawkfish","aquatic/sergeant-major":"Sergeant Major Fish","aquatic/almaco-jack":"Almaco Jack Fish","aquatic/angelfish":"Angelfish","aquatic/codfish":"Codfish","aquatic/herring":"Herring Fish","aquatic/piranha":"Piranha","aquatic/anemone-red":"Red Anemone","aquatic/anemone-magenta":"Magenta Anemone","aquatic/anemone-electric":"Electric Anemone"},M=Object.keys(c).sort((e,a)=>c[e]<c[a]?-1:1),g=[{label:"Level:",dataPath:["level"]},{label:"Skill Level:",dataPath:["skill_level"]},{label:"Items Mined:",dataPath:["items_mined"]},{label:"Items Placed:",dataPath:["items_placed"]},{label:"Items Crafted:",dataPath:["items_crafted"]},{label:"Deaths:",dataPath:["deaths"]}],w=[{label:"Areas Discovered:",dataPath:["statistics","areas_explored"]},{label:"Automata Killed:",dataPath:["computed","automata_killed"]},{label:"Brains Killed:",dataPath:["computed","brains_killed"]},{label:"Chests Looted:",dataPath:["statistics","containers_looted"]},{label:"Creatures Killed:",dataPath:["computed","creatures_killed"]},{label:"Deliverances:",dataPath:["statistics","deliverances"]},{label:"Dungeons Raided:",dataPath:["statistics","dungeons_raided"]},{label:"Infernal Parts Discovered:",dataPath:["computed","expiator_parts_discovered"]},{label:"Landmarks Upvoted:",dataPath:["statistics","landmarks_upvoted"]},{label:"Maws Plugged:",dataPath:["statistics","maws_plugged"]},{label:"Minerals Mined:",dataPath:["statistics","minerals_mined"]},{label:"Players Killed:",dataPath:["statistics","players_killed"]},{label:"Purifier Parts Discovered:",dataPath:["computed","purifier_parts_discovered"]},{label:"Supernatural Killed:",dataPath:["computed","supernatural_killed"]},{label:"Teleporters Discovered:",dataPath:["statistics","discoveries","mechanical/teleporter"]},{label:"Trees Mined:",dataPath:["statistics","trees_mined"]},{label:"Undertakings:",dataPath:["statistics","undertakings"]}];function u(e){return e?.statistics?.kills?Object.entries(e.statistics.kills):[]}function y(e){return e?.statistics?.discoveries?Object.entries(e.statistics.discoveries):[]}const l=e=>a=>a.reduce((r,t)=>t[0].startsWith(e)?r+t[1]:r,0),I=e=>a=>a.reduce((r,t)=>t[0].includes(e)?r+t[1]:r,0),R={automata_killed:[u,l("automata/")],brains_killed:[u,l("brains/")],creatures_killed:[u,l("creatures/")],supernatural_killed:[u,I("revenant")],expiator_parts_discovered:[y,l("hell/expiator")],purifier_parts_discovered:[y,l("mechanical/geck")]};function P(){return{vitals:{config:g,ExpectedNumberOfItems:g.length},accomplishments:{config:w,ExpectedNumberOfItems:w.length},kills:{SortedEntityIds:M,EntityTitles:c,ExpectedNumberOfItems:Object.keys(c).length}}}async function D({username:e},{onError:a}){const r=fetch(B(`${A}/players/${e}`)).then(async s=>{if(s.ok){const i=await s.json();return i.error?{message:i.error}:i}else return{message:"Error occurred while fetching data.",stackTrace:await s.text()}});window&&!window.spineScript&&(window.spineScript=new Promise((s,i)=>{const n="https://v2202410239072292297.goodsrv.de:6443/player-spine",o=document.createElement("script");o.src=`${n}/spine-player.min.js`,document.head.appendChild(o),o.onload=s,o.onerror=i}));const[t]=await Promise.all([r,window.spineScript]);if(t.message){a(t);return}return t.computed??={},Object.entries(R).forEach(([s,i])=>{t.computed[s]=i.reduce((n,o)=>o(n),t)}),{...P(),data:await r}}async function F({username:e}){return{title:e,backlink:".."}}async function q(e){C("player-container",e.data.appearance)}const $=Object.freeze(Object.defineProperty({__proto__:null,Component:_,HeaderConfig:F,loader:D,onload:q,placeholderLoader:P},Symbol.toStringTag,{value:"Module"})),H=window.location.pathname,k=H.match(/\/players\/([^\/]{1,64})\/?$/),N={"/players/$username":$};if(k){const[e,a]=k;f({id:"/players/$username",username:a})}function v(e){if(e){document.getElementsByTagName("header")[0].classList.remove("hidden"),document.getElementById("title").innerHTML=e.title;const a=document.getElementById("backlink");a.setAttribute("href",e.backlink??"#"),e.backlink?a.classList.remove("hidden"):a.classList.add("hidden")}else document.getElementsByTagName("header")[0].classList.add("hidden")}function f(e){e.id=="error"&&(m(x(e.message,null,e.stackTrace)),v(null));function a(r){f({...r,id:"error"})}return(async()=>{for(const[r,t]of Object.entries(N))if(r===e.id){if(t.HeaderConfig){const i=await t.HeaderConfig(e);v(i);let n="Deepworld 2025 MMO";i?.title&&(n=i.title+" - "+n),document.title=n}m(t.Component(t.placeholderLoader()));const s=await t.loader(e,{onError:a});s&&m(t.Component(s)),t.onload&&requestAnimationFrame(()=>t.onload(s));return}})().catch(r=>{f({id:"error",message:"Error occurred while fetching data.",stackTrace:r}),console.error(r)})}function m(e){document.getElementById("app").innerHTML=e}
